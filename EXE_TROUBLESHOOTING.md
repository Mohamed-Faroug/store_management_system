# 🔧 دليل حل مشاكل EXE

## 🚨 المشاكل الشائعة وحلولها

### **1. مشكلة: EXE لا يعمل عند النقر عليه**

#### **الأسباب المحتملة:**
- ملف EXE تالف أو غير مكتمل
- مكتبات مفقودة
- مسارات خاطئة للملفات
- مشاكل في الأذونات

#### **الحلول:**

##### **الحل 1: إعادة بناء EXE**
```bash
# حذف الملفات القديمة
del "dist\نظام_إدارة_المخزون.exe"
rmdir /s /q "build"

# إعادة البناء
pyinstaller --onefile --windowed --name "نظام_إدارة_المخزون" --add-data "app;app" --add-data "inventory.db;." main_exe.py
```

##### **الحل 2: استخدام ملف البناء الجاهز**
```bash
# تشغيل ملف البناء التلقائي
build_exe.bat
```

##### **الحل 3: تشغيل من Command Prompt**
```bash
# فتح Command Prompt في مجلد التطبيق
cd "C:\Users\mfh\Documents\casher\New folder"
"dist\نظام_إدارة_المخزون.exe"
```

### **2. مشكلة: "ModuleNotFoundError"**

#### **السبب:**
مكتبات مفقودة في EXE

#### **الحل:**
```bash
# إضافة المكتبات المفقودة
pyinstaller --onefile --windowed --name "نظام_إدارة_المخزون" --add-data "app;app" --add-data "inventory.db;." --hidden-import flask --hidden-import werkzeug --hidden-import jinja2 --hidden-import sqlite3 main_exe.py
```

### **3. مشكلة: "FileNotFoundError"**

#### **السبب:**
ملفات التطبيق غير موجودة في EXE

#### **الحل:**
```bash
# التأكد من إضافة جميع الملفات المطلوبة
pyinstaller --onefile --windowed --name "نظام_إدارة_المخزون" --add-data "app;app" --add-data "inventory.db;." --add-data "static;static" --add-data "templates;templates" main_exe.py
```

### **4. مشكلة: EXE يعمل لكن لا يفتح المتصفح**

#### **السبب:**
مشكلة في فتح المتصفح تلقائياً

#### **الحل:**
1. فتح المتصفح يدوياً
2. الذهاب إلى: `http://127.0.0.1:8080`
3. أو استخدام `run_exe.bat`

### **5. مشكلة: "Permission Denied"**

#### **السبب:**
مشاكل في الأذونات

#### **الحل:**
```bash
# تشغيل Command Prompt كمدير
# أو نقل الملف إلى مجلد آخر
# أو تغيير أذونات الملف
```

## 🛠️ أدوات التشخيص

### **1. ملف التشخيص:**
```bash
python debug_exe.py
```

### **2. فحص الملفات:**
```bash
# فحص وجود الملفات المطلوبة
dir app
dir static
dir templates
dir inventory.db
```

### **3. فحص المكتبات:**
```bash
# فحص المكتبات المثبتة
pip list
```

## 📋 خطوات البناء الصحيحة

### **1. التحضير:**
```bash
# تثبيت المتطلبات
pip install -r requirements.txt

# فحص التطبيق
python main.py
```

### **2. البناء:**
```bash
# استخدام ملف البناء التلقائي
build_exe.bat

# أو البناء اليدوي
pyinstaller --onefile --windowed --name "نظام_إدارة_المخزون" --add-data "app;app" --add-data "inventory.db;." main_exe.py
```

### **3. الاختبار:**
```bash
# تشغيل EXE
run_exe.bat

# أو تشغيل مباشر
"dist\نظام_إدارة_المخزون.exe"
```

## 🔍 فحص الأخطاء

### **1. فحص ملف الأخطاء:**
```
build\نظام_إدارة_المخزون\warn-نظام_إدارة_المخزون.txt
```

### **2. فحص ملف التحليل:**
```
build\نظام_إدارة_المخزون\xref-نظام_إدارة_المخزون.html
```

### **3. فحص حجم EXE:**
- يجب أن يكون حجم EXE أكبر من 50 MB
- إذا كان أصغر، فهناك مشكلة في البناء

## 🚀 الحلول السريعة

### **الحل السريع 1: استخدام Python مباشرة**
```bash
# بدلاً من EXE، استخدم Python مباشرة
python main.py
```

### **الحل السريع 2: استخدام ملف التشغيل**
```bash
# استخدام ملف التشغيل الجاهز
run_app.bat
```

### **الحل السريع 3: إعادة التثبيت**
```bash
# إعادة تثبيت المتطلبات
pip uninstall -r requirements.txt -y
pip install -r requirements.txt

# إعادة بناء EXE
build_exe.bat
```

## 📞 الدعم الفني

### **إذا لم تحل المشكلة:**

1. **تشغيل ملف التشخيص:**
   ```bash
   python debug_exe.py
   ```

2. **فحص ملف الأخطاء:**
   ```
   build\نظام_إدارة_المخزون\warn-نظام_إدارة_المخزون.txt
   ```

3. **إرسال معلومات النظام:**
   - إصدار Windows
   - إصدار Python
   - رسالة الخطأ الكاملة
   - نتائج ملف التشخيص

## 📝 ملاحظات مهمة

### **1. متطلبات النظام:**
- Windows 10 أو أحدث
- Python 3.8 أو أحدث
- مساحة فارغة 100 MB على الأقل

### **2. نصائح للنجاح:**
- تأكد من إغلاق جميع نسخ التطبيق قبل البناء
- استخدم Command Prompt كمدير
- تأكد من وجود جميع الملفات المطلوبة
- اختبر EXE في مجلد منفصل

### **3. مشاكل معروفة:**
- بعض مضادات الفيروسات قد تحجب EXE
- Windows Defender قد يحتاج إضافة استثناء
- بعض المكتبات قد تحتاج إضافة يدوية

---

**تم تطوير هذا النظام بواسطة: محمد فاروق**  
**تاريخ آخر تحديث: 9/9/2025**  
**جميع الحقوق محفوظة © 2025**
